<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=" TroopJS website generated from reusable templates and data by Assemble">
    <title>
      TroopJS Bundle | TroopJS
    </title>

    <!-- Styles -->
    <link rel="stylesheet" href="../assets/css/assemble.css">
    <link rel="stylesheet" href="../assets/css/markdown.css">

    <!-- Webfonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,300,600,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

    <!--[if lt IE 9]>
  <script src="../assets/js/html5shiv.js"></script>
  <script src="../assets/js/respond/respond.min.js"></script>
<![endif]-->

    <!-- Favicons -->
    <link rel="shortcut icon" type="image/png" href="../assets/img/favicon.png">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl =
        '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-33358518-5']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body style="background: white;" data-spy="scroll" data-target=".bs-sidebar">
    <div class="navbar" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="icon-bar"></span> 
            <span class="icon-bar"></span> 
            <span class="icon-bar"></span> 
          </button>
          <a href="../docs/" class="navbar-brand" style="background: url(../assets/img/brand.png) transparent no-repeat;">
            Troop.JS
          </a> 
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="../docs/">Docs</a> 
            </li>
            <li>
              <a href="../contrib/">Contrib</a> 
            </li>
            <li>
              <a href="https://cdn.rawgit.com/troopjs/troopjs/build/3.x/docs/index.html" title="TroopJS 3.x API Docs" target="_blank">API</a> 
            </li>
          </ul>
          <ul class="nav navbar-nav pull-right">
            <li>
              <a href="javascript:void(0)" onclick="_gaq.push(['_trackEvent', 'click-repo', 'clicked'])">
                <iframe src="http://ghbtns.com/github-btn.html?user=troopjs&repo=troopjs&type=watch&count=true&size=large" frameborder="0" scrolling="0" style="width:120px; height: 30px;" allowTransparency="true"></iframe>
              </a> 
            </li>
            <li>
              <a href="https://github.com/troopjs/troopjs/tags" title="Download TroopJS" target="_blank" onclick="_gaq.push(['_trackEvent', 'navbar-download', 'clicked'])">
                <i class="glyphicon glypicon-large glyphicon-download"></i>
              </a> 
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <header class="masthead subhead">
      <div class="container">
        <div class="row">
          <div class="col col-lg-12">
            <h1>
              <span class="text-muted">Contrib&nbsp;/</span> &nbsp;development</h1> 
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="col col-lg-3">
          <div class="sidebar">
            <span class="nav-section-title">
              Development
            </span> 
            <ul class="nav nav-pills nav-stacked">
              <li>
                <a href="index.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'development/Contribution Guideline']);">Contribution Guideline</a> 
              </li>
              <li class="active">
                <a href="bundle.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'development/TroopJS Bundle']);">TroopJS Bundle</a> 
              </li>
            </ul>
            <span class="nav-section-title">
              Modules
            </span> 
            <ul class="nav nav-pills nav-stacked">
              <li>
                <a href="contrib-audioplayer.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-contrib-audioplayer']);">troopjs-contrib-audioplayer</a> 
              </li>
              <li>
                <a href="contrib-audiorecorder.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-contrib-audiorecorder']);">troopjs-contrib-audiorecorder</a> 
              </li>
              <li>
                <a href="contrib-browser.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-contrib-browser']);">troopjs-contrib-browser</a> 
              </li>
              <li>
                <a href="contrib-reactjs.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-contrib-reactjs']);">troopjs-contrib-reactjs</a> 
              </li>
              <li>
                <a href="contrib-revealjs.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-contrib-revealjs']);">troopjs-contrib-revealjs</a> 
              </li>
              <li>
                <a href="contrib-sly.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-contrib-sly']);">troopjs-contrib-sly</a> 
              </li>
              <li>
                <a href="log.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-log']);">troopjs-log</a> 
              </li>
              <li>
                <a href="opt.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-opt']);">troopjs-opt</a> 
              </li>
              <li>
                <a href="require.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-require']);">troopjs-require</a> 
              </li>
              <li>
                <a href="util.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'modules/troopjs-util']);">troopjs-util</a> 
              </li>
            </ul>
          </div>
        </div>
        <div class="col col-lg-9">
          <div class="panel panel-docs">
            <blockquote>
              <p>The TroopJS bundle is the deck bearing all rest of modules, which serves various different aspects of development tasks, from creating release files to generating API docs.</p>
            </blockquote>
            <p>TroopJS unlike many other singular libraries, is a highly modularized framework consist of many small, dedicated modules that works side-by-side with certain dependencies on each other. The bundle repository instead has no actual functional
              module, but only to glue a selected group of modules together for development and release purpose, thus setup the bundle is the initial step of TroopJS development.</p>
            <h2 id="setup-the-bundle">Setup the bundle</h2> 
            <p>clone the bundle
              <a href="https://github.com/troopjs/troopjs">repository</a> first:</p>
            <pre><code class="language-bash">git clone https://github.com/troopjs/troopjs
<span class="built_in">cd</span>  troopjs</code></pre>
            <p>To install the list of default modules from bower, only core modules will be included as default</p>
            <pre><code class="language-bash">bower install</code></pre>
            <p>All core modules should now reside in the <code>bower_components</code> directory, this install will also include those 3rd libraries that individual module relies on.</p>
            <h2 id="build-with-grunt">Build with Grunt</h2> 
            <p>TroopJS uses
              <a href="http://gruntjs.com">grunt</a> as the build system, first make sure grunt and all grunt task plugins are installed via NPM.</p>
            <pre><code class="language-bash">npm install</code></pre>
            <p>Check for available grunt tasks by <code>grunt --help</code> which gives you the list of grunt tasks that powers TroopJS, some primary ones are explained below:</p>
            <ul>
              <li>compile - This task takes different profiles (right now <code>maxi</code> and <code>mini</code>) defined in each a list of included modules, to trace individual ones for it&#39;s module dependencies, eventually put together the bundled script
                will all modules by requirejs
                <a href="http://requirejs.org/docs/optimization.html">optimizer</a>. The results bundle uncompressed will be created in <code>dist</code> directory.</li>
              <li>test - This task is to run every module&#39;s tests with the buster runner backed by phantomJS, tests will be run from command line in the head-less browser, fails the task in case any of the tests has failed, and to log rest report on standard
                output.</li>
              <li>release - This task is to perform TroopJS release from the current branch, which create TroopJS bundle from the above <code>compile</code>
                task, eventually compress it and push the <code>dist</code> directory content to an orphan release branch corresponds to the current version.</li>
              <li>docs - This task generates and assembles JSDuck API documentation for all modules found within the <code>bower_components</code> directory.</li>
              <li>version - This task manages TroopJS versioning with Git tag in semver compliant format.</li>
              <li>eslint - This task lint for all modules sources found within <code>bower_components</code> directory with eslint(
                <a href="http://eslint.org/">http://eslint.org/</a> ) rules.</li>
            </ul>
            <h2 id="test-with-buster-js">Test with Buster.JS</h2> 
            <p>TroopJS tests are written and run in
              <a href="http://docs.busterjs.org/">Buster.JS</a>, all tests can be running in any of the following ways:</p>
            <ul>
              <li>opening web page with either static browser runner that runs tests in a browser</li>
              <li>directly through command line with headless browser like phantomJS</li>
              <li>simultaneously run tests on all the captured browsers</li>
            </ul>
            <p>Run tests with phantomJS is the simpliest way of verying all tests are green, which is available as grunt task <code>test</code>, if it&#39;s your first time of running this command buster and phantomJS will be installed which will take a while.</p>
            <pre><code class="language-bash">grunt test</code></pre>
            <p>Run only specific tests statically in one browser is handy for debugging and trouble shoot test failures, launch <code>buster-static</code>
              and point your browser to printed runner URL.</p>
            <pre><code class="language-bash">buster-static
Starting server on http://localhost:<span class="number">8282</span> /</code></pre>
            <p>You can also specify glob pattern that filters down the tests further and to run only those tests, e.g. the following is to run only tests from <code>troopjs-core</code> module.</p>
            <pre><code class="language-bash">buster-static -t <span class="string">"/Users/garry/workspace/troopjs/bower_components/troopjs-core/test/**/*.js"</span> </code></pre>
            <p>To run tests simutaneously with captured browsers you should instead launch <code>buster-server</code>, open the runner page with your concerned browsers and click for &quot;capture&quot;.</p>
            <pre><code class="language-bash">buster-server
buster-server running on http://localhost:<span class="number">1111</span> </code></pre>
            <p>Then you can run tests from command line like the above with static runner.</p>
            <pre><code class="language-bash">buster-static -t <span class="string">"/Users/garry/workspace/troopjs/bower_components/troopjs-core/test/**/*.js"</span> </code></pre>
            <p>When adding more tests be aware that all tests shall be within the <code>test</code> directory for each module, each subjected component shall has a corresponding test suite file of it&#39;s own, filename must be suffixed by <code>-test</code>,
              for instance the test suite file for <code>troopjs-browser/component/widget</code> would be <code>troopjs-browser/test/component/widget-test</code>.</p>
            <p>If in your tests other dependent scripts are to be required, they have to appear inside the <code>libs</code> or <code>resources</code>
              section of <code>test/buster.js</code> of
              <a href="http://docs.busterjs.org/en/latest/modules/buster-configuration/">buster configuration</a> 
              to make them available at runtime.</p>
            <p>You may want to check individual module source for more details of how does TroopJS buster test case looks like.</p>
            <h2 id="build-profile">Build profile</h2> 
            <p>Bundle profiles currently <code>maxi.js</code> and <code>mini.js</code> are preset list of modules to be included in a requirejs
              <a href="http://requirejs.org/docs/optimization.html">optimizer</a> run, all troopjs modules but not external ones will be bundled as a whole, with an extra <code>troopjs/version</code> module which indicates exact version of troopjs.</p>
            <p>If you&#39;re not satisfied with our preset list of modules in bundle, you can easily build you own bundle by modifying one of the existing bundle profile then just to rebuild, to examplify we redefine how the <code>maxi</code> bundle looks
              like by removing some unused modules from <code>troopjs-data</code>, and add some interested widgets from the <code>troopjs-contrib-browser</code> package.</p>
            <pre><code class="language-js">define([
    <span class="string">"./mini"</span>,
    <span class="string">"troopjs-opt/route/gadget"</span>,
    <span class="string">"troopjs-dom/hash/widget"</span>,
    <span class="string">"troopjs-dom/loom/plugin"</span>,
    <span class="string">"troopjs-contrib-browser/mvc/controller/widget"</span>,
    <span class="string">"troopjs-contrib-browser/data/widget"</span>,
    <span class="string">"troopjs-contrib-browser/cache/widget"</span> 
], <span class="function"><span class="keyword">function</span>  <span class="params">(mini)</span>  {</span> 
    <span class="keyword">return</span>  mini;
});</code></pre>
            <p>Before rebuild the bundle, we need to make sure the new <code>troopjs-contrib-browser</code> package is properly installed locally.</p>
            <pre><code>bower install troopjs-contrib-browser --save-dev</code></pre>
            <p>Then to rebuild you bundle with <code>grunt compile</code> and we should be able to check the updated list of bundled modules in <code>dist/build.txt</code> file.</p>
            <hr>
            <div class="alert">
              <p>Find an error?
                <a class="alert-link" href="https://github.com/troopjs/troopjs.com/issues?state=open">Let us know →</a> 
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <script src="../assets/js/holder.js"></script>
    <script src="../assets/js/highlight.js"></script>
    <script src="../assets/js/showup.js"></script>
    <script>
      $().showUp('.navbar');
    </script>
  </body>
</html>

