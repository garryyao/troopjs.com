<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=" TroopJS website generated from reusable templates and data by Assemble">
    <title>
      Component | TroopJS
    </title>

    <!-- Styles -->
    <link rel="stylesheet" href="../assets/css/assemble.css">
    <link rel="stylesheet" href="../assets/css/markdown.css">

    <!-- Webfonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,300,600,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

    <!--[if lt IE 9]>
  <script src="../assets/js/html5shiv.js"></script>
  <script src="../assets/js/respond/respond.min.js"></script>
<![endif]-->

    <!-- Favicons -->
    <link rel="shortcut icon" type="image/png" href="../assets/img/favicon.png">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl =
        '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-33358518-5']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body style="background: white;" data-spy="scroll" data-target=".bs-sidebar">
    <div class="navbar" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="icon-bar"></span> 
            <span class="icon-bar"></span> 
            <span class="icon-bar"></span> 
          </button>
          <a href="../docs/" class="navbar-brand" style="background: url(../assets/img/brand.png) transparent no-repeat;">
            Troop.JS
          </a> 
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="../docs/">Docs</a> 
            </li>
            <li>
              <a href="../contrib/">Contrib</a> 
            </li>
            <li>
              <a href="https://cdn.rawgit.com/troopjs/troopjs/build/3.x/docs/index.html" title="TroopJS 3.x API Docs" target="_blank">API</a> 
            </li>
          </ul>
          <ul class="nav navbar-nav pull-right">
            <li>
              <a href="javascript:void(0)" onclick="_gaq.push(['_trackEvent', 'click-repo', 'clicked'])">
                <iframe src="http://ghbtns.com/github-btn.html?user=troopjs&repo=troopjs&type=watch&count=true&size=large" frameborder="0" scrolling="0" style="width:120px; height: 30px;" allowTransparency="true"></iframe>
              </a> 
            </li>
            <li>
              <a href="https://github.com/troopjs/troopjs/tags" title="Download TroopJS" target="_blank" onclick="_gaq.push(['_trackEvent', 'navbar-download', 'clicked'])">
                <i class="glyphicon glypicon-large glyphicon-download"></i>
              </a> 
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <header class="masthead subhead">
      <div class="container">
        <div class="row">
          <div class="col col-lg-12">
            <h1>
              <span class="text-muted">Docs /&nbsp;</span> concepts
            </h1> 
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="col col-lg-3">
          <div class="sidebar">
            <span class="nav-section-title">
              Getting Started
            </span> 
            <ul class="nav nav-pills nav-stacked">
              <li>
                <a href="index.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'getting started/Introduction']);">Introduction</a> 
              </li>
              <li>
                <a href="installation.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'getting started/Installation']);">Installation</a> 
              </li>
              <li>
                <a href="first-app.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'getting started/Kick Start']);">Kick Start</a> 
              </li>
            </ul>
            <span class="nav-section-title">
              Core Concepts
            </span> 
            <ul class="nav nav-pills nav-stacked">
              <li>
                <a href="compose.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'concepts/Compose']);">Compose</a> 
              </li>
              <li class="active">
                <a href="component.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'concepts/Component']);">Component</a> 
              </li>
              <li>
                <a href="events.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'concepts/Events']);">Events</a> 
              </li>
              <li>
                <a href="dom.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'concepts/Widget']);">Widget</a> 
              </li>
              <li>
                <a href="data.html" onclick="_gaq.push(['_trackEvent', 'Sidenav', 'clicked', 'concepts/Data']);">Data</a> 
              </li>
            </ul>
          </div>
        </div>
        <div class="col col-lg-9">
          <div class="panel panel-docs">
            <blockquote>
              <p>TroopJS is around the component concept, component is the building block that influences your way of thinking about how application is built, application is grown by augmenting with more components.</p>
            </blockquote>
            <p>Components are typically categorized into <strong>two types</strong>, that are either <strong>widgets</strong>  that interact with the UI, or
              <strong>services</strong>  that works behind the scene for serving requests.</p>
            <h2 id="component">Component</h2> 
            <p>Components are no more than regular AMD module that exports the <code>constructor</code> function to instantiate component object. A component is created by <strong>extending</strong>  from any existing component in TroopJS, to examplify we&#39;re
              to extend from
              <code>troopjs-core/component/base</code> - the very basis ancestor component, passing in a function which serves as the constructor (no <code>new</code> keyword when creating the component), and one or more <strong>specs</strong>  object, whose
              properties will be mixed into the component properties. So far your ever familiarized JavaScript concepts.</p>
            <pre><code class="language-js">define(<span class="string">'child'</span>, [<span class="string">'troopjs-core/component/base'</span> ], <span class="function"><span class="keyword">function</span>  <span class="title">ChildModule</span> <span class="params">(Component)</span>  {</span> 
    <span class="keyword">return</span>  Component.extend(<span class="function"><span class="keyword">function</span>  <span class="title">ChildComponent</span> <span class="params">(name)</span>  {</span> 
            <span class="keyword">this</span>.name = name;
        },
        {
            <span class="string">"walk"</span>: <span class="function"><span class="keyword">function</span>  <span class="params">()</span>  {</span> 
                <span class="comment">// walk this child.</span> 
            }
        });
});
<span class="keyword">var</span>  child = require(<span class="string">'child'</span> );
child(<span class="string">'John'</span> );</code></pre>
            <p>To distinguish with regular JavaScript object, components in TroopJS has <strong>life cycle</strong>, which provides component the flexibility to behave differently based on the which <strong>phase</strong>  it is currently in, one example is
              a DOM component that is instantiated would neither listen to DOM events nor to render until the component is eventually attached to DOM tree, or even compilcated precondition like waiting for data to be loaded.</p>
            <p>Since constructor can only create component the synchronous way, an asynchronous procedure of &quot;activating&quot; a component is refered in TroopJS as &quot;starting&quot;, which is basically specials that transit component phases from
              &quot;initialize&quot; to eventually &quot;started&quot;, eventually consider the component activated.</p>
            <pre><code class="language-js">define(<span class="string">'child'</span>, [<span class="string">'troopjs-core/component/base'</span>, <span class="string">'jquery'</span> ], <span class="function"><span class="keyword">function</span>  <span class="title">ChildModule</span> <span class="params">(Component, $)</span>  {</span> 
    <span class="keyword">return</span>  Component.extend(<span class="function"><span class="keyword">function</span>  <span class="title">ChildComponent</span> <span class="params">(name)</span>  {</span> 
            <span class="keyword">this</span>.name = name;
        },
        {
            <span class="string">"sig/start"</span>: <span class="function"><span class="keyword">function</span>  <span class="title">startSignal</span> <span class="params">(time)</span>  {</span> 
                <span class="keyword">var</span>  me = <span class="keyword">this</span>;
                <span class="keyword">return</span>  $.ajax({
                    url: <span class="string">"give-birth"</span>,
                    data: {
                        name: me.name,
                        birth: time
                    }
                });
            }
        });
});
<span class="comment">// Instantiate the child by naming him.</span> 
<span class="keyword">var</span>  child = require(<span class="string">'child'</span> )(<span class="string">'John'</span> );
<span class="comment">// Give birth to the child.</span> 
child.start(Date.now()).then(<span class="function"><span class="keyword">function</span>  <span class="params">()</span>  {</span> 
    console.log(child.phase);    <span class="comment">// started</span> 
});
console.log(child.phase);    <span class="comment">// initialize</span> </code></pre>
            <p>In above example, the special <code>sig/start</code> method sends an asynchronous ajax request which yields a promise, which is returned to the call of <code>component#start</code>, we are telling TroopJS to trigger the component&#39;s start
              phase and wait for the completion of the ajax request, eventually the component enters &quot;started&quot; phase.</p>
            <h2 id="special">Special</h2> 
            <p>The <code>sig/start</code> method we used in the above section isn&#39;t a regular function, it&#39;s the signature of <strong>specials</strong>  in TroopJS, which are generally event handlers that are not part of component&#39;s object property
              but static functions created on the constructor, they&#39;re to be invoked when corresponding events are emitted.</p>
            <p>Specials prefixed with <code>sig</code> are &quot;signals&quot; that are handlers primarily for framework&#39;s internal events, like component&#39;s life-cycle change. Signal&#39;s usage are not limited to the framework, it&#39;s also suitable
              for inventing extension points of a component that can be optionally handled by the implementation.</p>
            <pre><code class="language-js">define(<span class="string">'foo'</span>, [<span class="string">'troopjs-core/component/gadget'</span> ], <span class="function"><span class="keyword">function</span>  <span class="title">FooModule</span> <span class="params">(Component)</span>  {</span> 
    <span class="keyword">return</span>  Component.extend({
            <span class="string">"sig/render"</span>: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span>  {</span> 
                console.log(data);    <span class="comment">// {title: "Foo"}</span> 
            }
        });
});
<span class="keyword">var</span>  foo = Foo();
foo.start().then(<span class="function"><span class="keyword">function</span>  <span class="params">()</span>  {</span> 
  foo.signal(<span class="string">"render"</span>, {title: <span class="string">"Foo"</span> });
});</code></pre>
            <p>Special like signals are distinguished from a regular method not only from it&#39;s signature, but also the fact that these methods when overriding in a hierarchial components tree where multiple specials share the same name, the overrided
              component&#39;s special function are always called ahead of the special from the base component.</p>
            <pre><code class="language-js">define(<span class="string">'foo'</span>, [<span class="string">'troopjs-core/component/gadget'</span> ], <span class="function"><span class="keyword">function</span>  <span class="title">FooModule</span> <span class="params">(Component)</span>  {</span> 
    <span class="keyword">return</span>  Component.extend({
        <span class="string">"sig/render"</span>: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span>  {</span> 
            console.log(<span class="string">"ancestor foo"</span> );
        }
    });
});
define(<span class="string">'bar'</span>, [<span class="string">'foo'</span> ], <span class="function"><span class="keyword">function</span>  <span class="title">FooModule</span> <span class="params">(Foo)</span>  {</span> 
  <span class="keyword">return</span>  Foo.extend({
    <span class="string">"sig/render"</span>: <span class="function"><span class="keyword">function</span>  <span class="params">(data)</span>  {</span> 
      console.log(<span class="string">"child bar"</span> );
    }
  });
});
<span class="keyword">var</span>  bar = Bar();
bar.start().then(<span class="function"><span class="keyword">function</span>  <span class="params">()</span>  {</span> 
  bar.signal(<span class="string">"render"</span> ); <span class="comment">// "child bar" "ancestor foo"</span> 
});</code></pre>
            <h2 id="service">Service</h2> 
            <p>Service is component extends from <code>troopjs-core/component/service</code> that exist primarily to serve other components&#39;s hub requests. Servcies are typically started when boostraping the application.</p>
            <pre><code class="language-js">require([
    <span class="string">'troopjs-dom/application/widget'</span>,
    <span class="string">'troopjs-net/ajax/service'</span>,
    <span class="string">'troopjs-data/query/service'</span>,
    <span class="string">'troopjs-data/cache/component'</span> 
], <span class="function"><span class="keyword">function</span>  <span class="params">(Application, AjaxService, QueryService, Cache)</span>  {</span> 
    <span class="comment">// Start the services on application bootstrap.</span> 
    Application(
        $(<span class="string">'html'</span> ),
        <span class="string">'application'</span>,
        AjaxService(),
        QueryService(Cache()),
        MyCustomComponent
    ).start().then(<span class="function"><span class="keyword">function</span>  <span class="title">onAppStarted</span> <span class="params">()</span>  {</span> 
        <span class="comment">// query service is now available.</span> 
    });
});</code></pre>
            <hr>
            <div class="alert">
              <p>Find an error?
                <a class="alert-link" href="https://github.com/troopjs/troopjs.com/issues?state=open">Let us know →</a> 
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <script src="../assets/js/holder.js"></script>
    <script src="../assets/js/highlight.js"></script>
    <script src="../assets/js/showup.js"></script>
    <script>
      $().showUp('.navbar');
    </script>
  </body>
</html>

